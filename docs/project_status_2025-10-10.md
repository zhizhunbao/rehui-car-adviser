# Rehui Car Adviser é¡¹ç›®çŠ¶æ€æŠ¥å‘Š

**ç”Ÿæˆæ—¥æœŸ**: 2025 å¹´ 10 æœˆ 10 æ—¥  
**é¡¹ç›®ç‰ˆæœ¬**: 2.1.0  
**æŠ¥å‘Šç±»å‹**: WebSocket å®æ—¶é€šä¿¡æ¶æ„å®ŒæˆçŠ¶æ€

---

## ğŸ“‹ é¡¹ç›®æ¦‚è§ˆ

### é¡¹ç›®åŸºæœ¬ä¿¡æ¯

- **é¡¹ç›®åç§°**: Rehui Car Adviser (æ™ºèƒ½æœè½¦é¡¾é—®)
- **é¡¹ç›®ç±»å‹**: å…¨æ ˆ Web åº”ç”¨
- **ç›®æ ‡ç”¨æˆ·**: åŠ æ‹¿å¤§è´­è½¦ç”¨æˆ·
- **æ ¸å¿ƒåŠŸèƒ½**: åŸºäºè‡ªç„¶è¯­è¨€çš„æ™ºèƒ½è½¦æºæœç´¢æœåŠ¡
- **æŠ€æœ¯æ¶æ„**: React + FastAPI + AI é›†æˆ + WebSocket å®æ—¶é€šä¿¡
- **å½“å‰çŠ¶æ€**: WebSocket å®æ—¶é€šä¿¡æ¶æ„å®Œæˆï¼Œå‰ç«¯æ¶æ„é‡æ„å®Œæˆ

### é¡¹ç›®å®šä½

é¢å‘åŠ æ‹¿å¤§ç”¨æˆ·çš„æ™ºèƒ½æœè½¦æœåŠ¡ï¼Œç”¨æˆ·é€šè¿‡è‡ªç„¶è¯­è¨€è¾“å…¥è´­è½¦éœ€æ±‚ï¼Œç³»ç»Ÿä½¿ç”¨ AI è§£æç”¨æˆ·æ„å›¾å¹¶ä» CarGurus è·å–åŒ¹é…çš„è½¦æºä¿¡æ¯ã€‚é¡¹ç›®å·²å®Œæˆ WebSocket å®æ—¶é€šä¿¡æ¶æ„å’Œå‰ç«¯æ¶æ„é‡æ„ï¼Œå®ç°äº†æµå¼å¯¹è¯å’Œå®æ—¶æœç´¢åŠŸèƒ½ã€‚

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: React 18 + TypeScript
- **æ„å»ºå·¥å…·**: Vite 5.0.8
- **æ ·å¼æ¡†æ¶**: Tailwind CSS 3.3.6
- **çŠ¶æ€ç®¡ç†**: React Context API
- **HTTP å®¢æˆ·ç«¯**: Axios 1.6.0
- **WebSocket**: åŸç”Ÿ WebSocket API
- **æ—¥å¿—ç³»ç»Ÿ**: loglevel 1.9.2

### åç«¯æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: FastAPI 0.104.1
- **ASGI æœåŠ¡å™¨**: Uvicorn 0.24.0
- **WebSocket**: FastAPI WebSocket æ”¯æŒ
- **æ•°æ®éªŒè¯**: Pydantic 2.5.0
- **AI æœåŠ¡**: Google Gemini 2.5 Flash
- **ç½‘é¡µæŠ“å–**: Selenium 4.15.2 + Chrome WebDriver
- **HTML è§£æ**: BeautifulSoup 4.12.2
- **æ•°æ®åº“**: Supabase PostgreSQL
- **ç¯å¢ƒç®¡ç†**: python-dotenv 1.0.0

### éƒ¨ç½²é…ç½®

- **éƒ¨ç½²å¹³å°**: Render
- **é…ç½®æ–¹å¼**: Blueprint (render.yaml)
- **æœåŠ¡ç±»å‹**: å‰åç«¯åˆ†ç¦»éƒ¨ç½² + WebSocket æ”¯æŒ

---

## ğŸ“ é¡¹ç›®ç»“æ„åˆ†æ

### å½“å‰ç›®å½•ç»“æ„

```
rehui-car-adviser/
â”œâ”€â”€ backend/                    # FastAPIåç«¯
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/               # APIè·¯ç”±å±‚
â”‚   â”‚   â”‚   â””â”€â”€ websocket.py   # WebSocketè·¯ç”± (æ–°å¢)
â”‚   â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹å±‚
â”‚   â”‚   â”‚   â””â”€â”€ schemas.py     # Pydanticæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ core/          # æ ¸å¿ƒæœåŠ¡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ conversation_service.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ search_service.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ realtime_service.py  # å®æ—¶æœåŠ¡ (æ–°å¢)
â”‚   â”‚   â”‚   â”œâ”€â”€ aggregation/   # èšåˆæœåŠ¡
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ multi_platform_car_aggregator.py
â”‚   â”‚   â”‚   â””â”€â”€ external/      # å¤–éƒ¨æœåŠ¡
â”‚   â”‚   â”‚       â””â”€â”€ crawler/   # çˆ¬è™«æœåŠ¡
â”‚   â”‚   â”‚           â”œâ”€â”€ cargurus_crawler.py
â”‚   â”‚   â”‚           â”œâ”€â”€ cargurus_car_searcher.py
â”‚   â”‚   â”‚           â”œâ”€â”€ cargurus_crawler_coordinator.py
â”‚   â”‚   â”‚           â””â”€â”€ base_crawler_coordinator.py  # åŸºç¡€åè°ƒå™¨ (æ–°å¢)
â”‚   â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•°å±‚
â”‚   â”‚       â”œâ”€â”€ websocket/     # WebSocketå·¥å…· (æ–°å¢)
â”‚   â”‚       â”œâ”€â”€ business/      # ä¸šåŠ¡å·¥å…·
â”‚   â”‚       â”œâ”€â”€ data/          # æ•°æ®å·¥å…·
â”‚   â”‚       â”œâ”€â”€ validation/    # éªŒè¯å·¥å…·
â”‚   â”‚       â””â”€â”€ web/           # ç½‘é¡µå·¥å…·
â”‚   â”œâ”€â”€ main.py                # åº”ç”¨å…¥å£
â”‚   â””â”€â”€ requirements.txt       # Pythonä¾èµ–
â”œâ”€â”€ frontend/                   # Reactå‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/        # Reactç»„ä»¶ (é‡æ„)
â”‚   â”‚   â”‚   â”œâ”€â”€ ui/            # UIåŸºç¡€ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ features/      # åŠŸèƒ½ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ layout/        # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ contexts/          # ContextçŠ¶æ€ç®¡ç† (é‡æ„)
â”‚   â”‚   â”‚   â”œâ”€â”€ conversation/  # å¯¹è¯çŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ search/        # æœç´¢çŠ¶æ€
â”‚   â”‚   â”‚   â””â”€â”€ app/           # åº”ç”¨çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ hooks/             # è‡ªå®šä¹‰Hooks (æ–°å¢)
â”‚   â”‚   â”œâ”€â”€ services/          # APIæœåŠ¡ (é‡æ„)
â”‚   â”‚   â”‚   â”œâ”€â”€ api/           # APIæœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ http/          # HTTPå®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ websocket/     # WebSocketæœåŠ¡ (æ–°å¢)
â”‚   â”‚   â”‚   â””â”€â”€ utils/         # æœåŠ¡å·¥å…·
â”‚   â”‚   â”œâ”€â”€ types/             # TypeScriptç±»å‹ (é‡æ„)
â”‚   â”‚   â”‚   â”œâ”€â”€ api.ts         # APIç±»å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ car.ts         # è½¦æºç±»å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ conversation.ts # å¯¹è¯ç±»å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ search.ts      # æœç´¢ç±»å‹
â”‚   â”‚   â”‚   â””â”€â”€ websocket.ts   # WebSocketç±»å‹ (æ–°å¢)
â”‚   â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•° (é‡æ„)
â”‚   â”‚   â””â”€â”€ styles/            # æ ·å¼æ–‡ä»¶ (é‡æ„)
â”‚   â””â”€â”€ package.json           # Node.jsä¾èµ–
â”œâ”€â”€ docs/                      # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ frontend_architecture.md  # å‰ç«¯æ¶æ„æ–‡æ¡£ (æ–°å¢)
â”‚   â”œâ”€â”€ backend_architecture.md   # åç«¯æ¶æ„æ–‡æ¡£ (æ–°å¢)
â”‚   â””â”€â”€ project_status_2025-10-10.md  # é¡¹ç›®çŠ¶æ€æ–‡æ¡£
â””â”€â”€ render.yaml                # éƒ¨ç½²é…ç½®
```

### æ ¸å¿ƒæ¨¡å—åˆ†æ

#### 1. WebSocket å®æ—¶é€šä¿¡å±‚ - æ–°å¢

- **åç«¯ WebSocket æœåŠ¡** (`app/api/websocket.py`)

  - WebSocket è·¯ç”±å¤„ç†
  - å®æ—¶æ¶ˆæ¯å¹¿æ’­
  - è¿æ¥ç®¡ç†

- **å®æ—¶æœåŠ¡** (`app/services/core/realtime_service.py`)

  - å®æ—¶æ•°æ®å¤„ç†
  - æ¶ˆæ¯é˜Ÿåˆ—ç®¡ç†
  - æµå¼å“åº”å¤„ç†

- **WebSocket å·¥å…·** (`app/utils/websocket/`)
  - è¿æ¥ç®¡ç†å·¥å…·
  - æ¶ˆæ¯å¤„ç†å·¥å…·
  - é”™è¯¯å¤„ç†å·¥å…·

#### 2. å‰ç«¯æ¶æ„é‡æ„ - å®Œæˆ

- **ç»„ä»¶å±‚é‡æ„** (`components/`)

  - UI åŸºç¡€ç»„ä»¶ï¼šButtonã€Inputã€Cardã€Modal
  - åŠŸèƒ½ç»„ä»¶ï¼šConversationSearchã€CarCardã€SearchResults
  - å¸ƒå±€ç»„ä»¶ï¼šHeaderã€Sidebarã€Footer

- **çŠ¶æ€ç®¡ç†å±‚é‡æ„** (`contexts/`)

  - ConversationContextï¼šå¯¹è¯çŠ¶æ€ç®¡ç†
  - SearchContextï¼šæœç´¢çŠ¶æ€ç®¡ç†
  - AppContextï¼šåº”ç”¨å…¨å±€çŠ¶æ€

- **æœåŠ¡å±‚é‡æ„** (`services/`)

  - ApiServiceï¼šç»Ÿä¸€ API æœåŠ¡
  - WebSocketServiceï¼šå®æ—¶é€šä¿¡æœåŠ¡
  - AxiosClientï¼šHTTP å®¢æˆ·ç«¯

- **ç±»å‹å®šä¹‰é‡æ„** (`types/`)
  - æŒ‰åŠŸèƒ½åŸŸåˆ†ç±»çš„ç±»å‹å®šä¹‰
  - WebSocket æ¶ˆæ¯ç±»å‹
  - API å“åº”ç±»å‹

#### 3. çˆ¬è™«æœåŠ¡ä¼˜åŒ– - å®Œæˆ

- **åŸºç¡€åè°ƒå™¨** (`base_crawler_coordinator.py`)

  - é€šç”¨çˆ¬è™«åè°ƒé€»è¾‘
  - é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
  - èµ„æºç®¡ç†

- **CarGurus åè°ƒå™¨** (`cargurus_crawler_coordinator.py`)
  - CarGurus ç‰¹å®šé€»è¾‘
  - é¡µé¢æ£€æµ‹å’ŒéªŒè¯
  - æ•°æ®æå–åè°ƒ

---

## ğŸ”„ WebSocket å®æ—¶é€šä¿¡æ¶æ„

### å®æ—¶é€šä¿¡ç‰¹æ€§

#### 1. æµå¼å¯¹è¯å¤„ç†

- **å³æ—¶å“åº”**: ç”¨æˆ·è¾“å…¥åç«‹å³å¼€å§‹æ¥æ”¶ AI å›å¤
- **æµå¼æ˜¾ç¤º**: AI å›å¤é€å­—æ˜¾ç¤ºï¼Œæå‡äº¤äº’æ„Ÿ
- **å®æ—¶çŠ¶æ€**: æ˜¾ç¤ºå¯¹è¯å¤„ç†è¿›åº¦å’ŒçŠ¶æ€

#### 2. å®æ—¶æœç´¢æ›´æ–°

- **æœç´¢ç»“æœæµ**: æœç´¢ç»“æœå®æ—¶æ›´æ–°ï¼Œæ— éœ€ç­‰å¾…
- **è¿›åº¦æŒ‡ç¤º**: æ˜¾ç¤ºæœç´¢è¿›åº¦å’Œå½“å‰çŠ¶æ€
- **å¢é‡æ›´æ–°**: æ–°ç»“æœå®æ—¶æ·»åŠ åˆ°åˆ—è¡¨

#### 3. åŒå‘é€šä¿¡

- **å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯**: ç”¨æˆ·æ¶ˆæ¯å’Œæœç´¢è¯·æ±‚
- **æœåŠ¡ç«¯åˆ°å®¢æˆ·ç«¯**: AI å›å¤å’Œæœç´¢ç»“æœ
- **çŠ¶æ€åŒæ­¥**: å®æ—¶åŒæ­¥åº”ç”¨çŠ¶æ€

### WebSocket æœåŠ¡æ¶æ„

#### 1. åç«¯ WebSocket æœåŠ¡

```python
# app/api/websocket.py
@router.websocket("/ws")
async def websocket_endpoint(websocket: WebSocket):
    # WebSocketè¿æ¥å¤„ç†
    # æ¶ˆæ¯è·¯ç”±å’Œå¹¿æ’­
    # è¿æ¥ç”Ÿå‘½å‘¨æœŸç®¡ç†
```

#### 2. å®æ—¶æœåŠ¡å±‚

```python
# app/services/core/realtime_service.py
class RealtimeService:
    # å®æ—¶æ•°æ®å¤„ç†
    # æ¶ˆæ¯é˜Ÿåˆ—ç®¡ç†
    # æµå¼å“åº”å¤„ç†
```

#### 3. å‰ç«¯ WebSocket æœåŠ¡

```typescript
// services/websocket/websocketService.ts
export class WebSocketService {
  // è¿æ¥ç®¡ç†
  // æ¶ˆæ¯å‘é€å’Œæ¥æ”¶
  // è‡ªåŠ¨é‡è¿æœºåˆ¶
}
```

### æ¶ˆæ¯ç±»å‹å®šä¹‰

#### 1. å¯¹è¯æ¶ˆæ¯

```typescript
interface ConversationMessage {
  type: "conversation";
  action: "start" | "content" | "done";
  data: {
    message: string;
    sessionId: string;
    content?: string;
  };
}
```

#### 2. æœç´¢æ¶ˆæ¯

```typescript
interface SearchMessage {
  type: "search";
  action: "start" | "results" | "done";
  data: {
    query: string;
    results?: CarData[];
    progress?: number;
  };
}
```

#### 3. ä¸šåŠ¡çŠ¶æ€æ¶ˆæ¯

```typescript
interface BusinessMessage {
  type: "business_status";
  data: {
    status: string;
    message: string;
    progress?: number;
  };
}
```

---

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½å®ç°

### 1. è‡ªç„¶è¯­è¨€æœç´¢ - å¢å¼º

- **å®ç°æ–¹å¼**: Google Gemini 2.5 Flash æ¨¡å‹
- **åŠŸèƒ½**: å°†ç”¨æˆ·è‡ªç„¶è¯­è¨€æŸ¥è¯¢è§£æä¸ºç»“æ„åŒ–æœç´¢å‚æ•°
- **æ”¯æŒè¯­è¨€**: ä¸­è‹±æ–‡æ··åˆæŸ¥è¯¢
- **è§£æå­—æ®µ**: å“ç‰Œã€å‹å·ã€å¹´ä»½ã€ä»·æ ¼ã€é‡Œç¨‹ã€ä½ç½®ç­‰
- **å®æ—¶åé¦ˆ**: é€šè¿‡ WebSocket å®æ—¶æ˜¾ç¤ºè§£æè¿›åº¦

### 2. è½¦æºæ•°æ®æŠ“å– - ä¼˜åŒ–

- **æ•°æ®æº**: CarGurus åŠ æ‹¿å¤§ç«™
- **æŠ€æœ¯æ–¹æ¡ˆ**: Selenium + Chrome WebDriver
- **æŠ“å–ç­–ç•¥**: æ— å¤´æµè§ˆå™¨ + åæ£€æµ‹æœºåˆ¶
- **é‡è¯•æœºåˆ¶**: 3 æ¬¡é‡è¯•ï¼ŒæŒ‡æ•°é€€é¿
- **å®æ—¶æ›´æ–°**: é€šè¿‡ WebSocket å®æ—¶æ˜¾ç¤ºæŠ“å–è¿›åº¦å’Œç»“æœ

#### çˆ¬è™«æ¨¡å—åˆ†å·¥

- **BaseCrawlerCoordinator**: åŸºç¡€çˆ¬è™«åè°ƒå™¨
- **CarGurusCrawlerCoordinator**: CarGurus ç‰¹å®šåè°ƒå™¨
- **CarGurusCarSearcher**: è½¦æºæœç´¢å™¨
- **CarGurusCrawler**: ä¸»çˆ¬è™«æœåŠ¡

### 3. å¯¹è¯å¼äº¤äº’ - æµå¼å¢å¼º

- **ä¼šè¯ç®¡ç†**: åŸºäº UUID çš„ä¼šè¯ ID
- **ä¸Šä¸‹æ–‡ä¿æŒ**: æœ€è¿‘ 6 æ¡æ¶ˆæ¯çš„å¯¹è¯å†å²
- **æ™ºèƒ½åˆ¤æ–­**: AI è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦éœ€è¦æœç´¢è½¦æº
- **æµå¼å“åº”**: AI å›å¤å®æ—¶æµå¼æ˜¾ç¤º
- **çŠ¶æ€æŒä¹…åŒ–**: å†…å­˜å­˜å‚¨ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ Redisï¼‰

### 4. å®æ—¶ä¸šåŠ¡æ¶ˆæ¯æ˜¾ç¤º - æ–°å¢

- **æœç´¢è¿›åº¦**: å®æ—¶æ˜¾ç¤ºæœç´¢è¿›åº¦å’Œå½“å‰æ­¥éª¤
- **é“¾æ¥æŸ¥è¯¢çŠ¶æ€**: æ˜¾ç¤º CarGurus é“¾æ¥æŸ¥è¯¢çŠ¶æ€
- **è½¦æºç»Ÿè®¡**: å®æ—¶æ˜¾ç¤ºæ‰¾åˆ°çš„è½¦æºæ•°é‡
- **é”™è¯¯çŠ¶æ€**: å®æ—¶æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯å’Œå¤„ç†çŠ¶æ€

### 5. æ—¥å¿—ç³»ç»Ÿ - ä¼˜åŒ–

- **è®¾è®¡ç†å¿µ**: å…³é”®éƒ¨ä½æ—¥å¿—è®°å½•
- **æ ¼å¼æ ‡å‡†**: `æ—¶é—´æˆ³ | æ‰§è¡Œåºå· | åŒ…å.æ–¹æ³•å:è¡Œå· | ç»“è®º - åŸå› `
- **å‰åç«¯åŒæ­¥**: å‰ç«¯æ—¥å¿—è‡ªåŠ¨å‘é€åˆ°åç«¯
- **å®æ—¶æ—¥å¿—**: é€šè¿‡ WebSocket å®æ—¶ä¼ è¾“æ—¥å¿—ä¿¡æ¯
- **æ—¥å¿—çº§åˆ«**: å¼€å‘ç¯å¢ƒ debugï¼Œç”Ÿäº§ç¯å¢ƒ info

---

## âš ï¸ å½“å‰é—®é¢˜ä¸é£é™©

### 1. æŠ€æœ¯é—®é¢˜

- **WebSocket è¿æ¥ç¨³å®šæ€§**: éœ€è¦å¤„ç†ç½‘ç»œå¼‚å¸¸å’Œé‡è¿
- **æ¶ˆæ¯é˜Ÿåˆ—ç®¡ç†**: å¤§é‡å®æ—¶æ¶ˆæ¯çš„å¤„ç†å’Œå†…å­˜ç®¡ç†
- **å¹¶å‘è¿æ¥**: WebSocket è¿æ¥çš„å¹¶å‘å¤„ç†èƒ½åŠ›
- **é”™è¯¯æ¢å¤**: å®æ—¶é€šä¿¡ä¸­çš„é”™è¯¯å¤„ç†å’Œæ¢å¤

### 2. æ¶æ„é—®é¢˜

- **çŠ¶æ€åŒæ­¥**: å‰åç«¯çŠ¶æ€çš„ä¸€è‡´æ€§ä¿è¯
- **æ¶ˆæ¯é¡ºåº**: ç¡®ä¿æ¶ˆæ¯çš„æ­£ç¡®é¡ºåºå’Œå®Œæ•´æ€§
- **èµ„æºç®¡ç†**: WebSocket è¿æ¥å’Œæµè§ˆå™¨èµ„æºçš„åˆç†ç®¡ç†
- **æ€§èƒ½ä¼˜åŒ–**: å®æ—¶é€šä¿¡å¯¹ç³»ç»Ÿæ€§èƒ½çš„å½±å“

### 3. éƒ¨ç½²é—®é¢˜

- **WebSocket æ”¯æŒ**: ç¡®ä¿éƒ¨ç½²ç¯å¢ƒæ”¯æŒ WebSocket
- **è´Ÿè½½å‡è¡¡**: WebSocket è¿æ¥çš„è´Ÿè½½å‡è¡¡å¤„ç†
- **é˜²ç«å¢™é…ç½®**: WebSocket åè®®çš„ç½‘ç»œé…ç½®
- **ç›‘æ§å‘Šè­¦**: å®æ—¶é€šä¿¡çš„ç›‘æ§å’Œå‘Šè­¦æœºåˆ¶

### 4. ç”¨æˆ·ä½“éªŒé—®é¢˜

- **è¿æ¥çŠ¶æ€**: ç”¨æˆ·éœ€è¦æ¸…æ¥šäº†è§£è¿æ¥çŠ¶æ€
- **æ¶ˆæ¯ä¸¢å¤±**: å¤„ç†ç½‘ç»œå¼‚å¸¸å¯¼è‡´çš„æ¶ˆæ¯ä¸¢å¤±
- **æ€§èƒ½å½±å“**: å®æ—¶é€šä¿¡å¯¹é¡µé¢æ€§èƒ½çš„å½±å“
- **å…¼å®¹æ€§**: ä¸åŒæµè§ˆå™¨çš„ WebSocket å…¼å®¹æ€§

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### å“åº”æ—¶é—´ç›®æ ‡

- **WebSocket è¿æ¥å»ºç«‹**: < 1 ç§’
- **å®æ—¶æ¶ˆæ¯å»¶è¿Ÿ**: < 100ms
- **æµå¼å¯¹è¯å“åº”**: < 500ms é¦–å“åº”
- **æœç´¢è¿›åº¦æ›´æ–°**: < 200ms
- **é¡µé¢åŠ è½½æ—¶é—´**: < 2 ç§’

### å½“å‰æ€§èƒ½è¡¨ç°

æ ¹æ® WebSocket å®æ—¶é€šä¿¡æ¶æ„ï¼š

- **å®æ—¶å“åº”**: æ˜¾è‘—æå‡ç”¨æˆ·ä½“éªŒ
- **è¿æ¥ç¨³å®šæ€§**: éœ€è¦æŒç»­ä¼˜åŒ–
- **å†…å­˜ä½¿ç”¨**: éœ€è¦ç›‘æ§ WebSocket è¿æ¥å†…å­˜
- **å¹¶å‘å¤„ç†**: éœ€è¦æµ‹è¯•é«˜å¹¶å‘åœºæ™¯

---

## ğŸ”§ é…ç½®è¦æ±‚

### ç¯å¢ƒå˜é‡é…ç½®

```env
# å¿…éœ€é…ç½®
GOOGLE_GEMINI_API_KEY=your_gemini_api_key

# WebSocketé…ç½®
WEBSOCKET_ENABLED=True
WEBSOCKET_MAX_CONNECTIONS=100
WEBSOCKET_HEARTBEAT_INTERVAL=30

# å¯é€‰é…ç½®
SUPABASE_URL=your_supabase_url
SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key
DATABASE_URL=your_database_url
DEBUG=True
VITE_API_URL=http://localhost:8000
VITE_WEBSOCKET_URL=ws://localhost:8000
```

### ç³»ç»Ÿè¦æ±‚

- **Node.js**: 18+
- **Python**: 3.9+
- **Chrome æµè§ˆå™¨**: ç”¨äºç½‘é¡µæŠ“å–
- **å†…å­˜**: å»ºè®® 4GB+ï¼ˆWebSocket è¿æ¥éœ€è¦é¢å¤–å†…å­˜ï¼‰
- **ç½‘ç»œ**: ç¨³å®šçš„ç½‘ç»œè¿æ¥æ”¯æŒ WebSocket
- **å­˜å‚¨**: æ•°æ®ç›®å½•éœ€è¦è¶³å¤Ÿç©ºé—´å­˜å‚¨è½¦å‹æ•°æ®

---

## ğŸ¯ è¿‘æœŸå¼€å‘é‡ç‚¹

### 1. ç´§æ€¥ä¿®å¤

- [ ] å®Œå–„ WebSocket é”™è¯¯å¤„ç†å’Œé‡è¿æœºåˆ¶
- [ ] ä¼˜åŒ–å®æ—¶æ¶ˆæ¯çš„å†…å­˜ç®¡ç†
- [ ] æµ‹è¯•é«˜å¹¶å‘ WebSocket è¿æ¥
- [ ] å®Œå–„å‰ç«¯ WebSocket æœåŠ¡é›†æˆ

### 2. åŠŸèƒ½å®Œå–„

- [ ] å®ç°å®æ—¶ä¸šåŠ¡æ¶ˆæ¯æ˜¾ç¤ºç»„ä»¶
- [ ] ä¼˜åŒ–æµå¼å¯¹è¯çš„ç”¨æˆ·ä½“éªŒ
- [ ] æ·»åŠ  WebSocket è¿æ¥çŠ¶æ€æŒ‡ç¤ºå™¨
- [ ] å®Œå–„å®æ—¶æœç´¢è¿›åº¦æ˜¾ç¤º

### 3. æ€§èƒ½ä¼˜åŒ–

- [ ] ä¼˜åŒ– WebSocket æ¶ˆæ¯å¤„ç†æ€§èƒ½
- [ ] å®ç°æ¶ˆæ¯é˜Ÿåˆ—å’Œæ‰¹å¤„ç†
- [ ] æ·»åŠ  WebSocket è¿æ¥æ± ç®¡ç†
- [ ] ä¼˜åŒ–å®æ—¶æ•°æ®çš„å†…å­˜ä½¿ç”¨

### 4. ç›‘æ§å’Œè°ƒè¯•

- [ ] æ·»åŠ  WebSocket è¿æ¥ç›‘æ§
- [ ] å®ç°å®æ—¶é€šä¿¡çš„æ—¥å¿—è®°å½•
- [ ] æ·»åŠ æ€§èƒ½æŒ‡æ ‡æ”¶é›†
- [ ] å®Œå–„é”™è¯¯è¿½è¸ªå’ŒæŠ¥å‘Š

### 5. éƒ¨ç½²ä¼˜åŒ–

- [ ] é…ç½® WebSocket è´Ÿè½½å‡è¡¡
- [ ] ä¼˜åŒ– WebSocket è¿æ¥çš„ç”Ÿå‘½å‘¨æœŸ
- [ ] æ·»åŠ  WebSocket å¥åº·æ£€æŸ¥
- [ ] é…ç½® WebSocket ç›‘æ§å‘Šè­¦

---

## ğŸ“ˆ é¡¹ç›®è¯„ä¼°

### ä¼˜åŠ¿

1. **å®æ—¶é€šä¿¡**: WebSocket å®ç°çœŸæ­£çš„å®æ—¶äº¤äº’ä½“éªŒ
2. **æµå¼ä½“éªŒ**: AI å›å¤å’Œæœç´¢ç»“æœå®æ—¶æµå¼æ˜¾ç¤º
3. **æ¶æ„ç°ä»£åŒ–**: åˆ†å±‚æ¶æ„å’Œæ¨¡å—åŒ–è®¾è®¡
4. **æŠ€æœ¯æ ˆå…ˆè¿›**: ä½¿ç”¨æœ€æ–°çš„ React 18 å’Œ FastAPI
5. **AI é›†æˆå…ˆè¿›**: é›†æˆ Google Gemini 2.5 Flash
6. **ç”¨æˆ·ä½“éªŒä¼˜ç§€**: å¯¹è¯å¼äº¤äº’ï¼Œé™ä½ä½¿ç”¨é—¨æ§›
7. **æ—¥å¿—ç³»ç»Ÿå®Œå–„**: å…³é”®éƒ¨ä½æ—¥å¿—ï¼Œä¾¿äºè°ƒè¯•
8. **éƒ¨ç½²é…ç½®å®Œæ•´**: æ”¯æŒ Render ä¸€é”®éƒ¨ç½²
9. **å‰ç«¯æ¶æ„é‡æ„**: ç»„ä»¶åŒ–ã€æ¨¡å—åŒ–ã€ç±»å‹å®‰å…¨
10. **å®æ—¶ä¸šåŠ¡åé¦ˆ**: ç”¨æˆ·å¯ä»¥çœ‹åˆ°ç³»ç»Ÿå®æ—¶å¤„ç†çŠ¶æ€

### æŒ‘æˆ˜

1. **WebSocket å¤æ‚æ€§**: å®æ—¶é€šä¿¡å¢åŠ äº†ç³»ç»Ÿå¤æ‚æ€§
2. **è¿æ¥ç®¡ç†**: WebSocket è¿æ¥çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†
3. **æ¶ˆæ¯å¯é æ€§**: ç¡®ä¿æ¶ˆæ¯çš„å¯é ä¼ è¾“å’Œé¡ºåº
4. **æ€§èƒ½å½±å“**: å®æ—¶é€šä¿¡å¯¹ç³»ç»Ÿæ€§èƒ½çš„å½±å“
5. **å¤–éƒ¨ä¾èµ–é£é™©**: ä¾èµ– CarGurus ç½‘ç«™ç»“æ„å’Œ Gemini API
6. **çˆ¬è™«ç¨³å®šæ€§**: ç½‘é¡µæŠ“å–å®¹æ˜“å—ç½‘ç«™å˜åŒ–å½±å“
7. **æˆæœ¬æ§åˆ¶**: AI API è°ƒç”¨å’Œçˆ¬è™«èµ„æºæ¶ˆè€—
8. **æ•°æ®ç»´æŠ¤**: éœ€è¦å®šæœŸæ›´æ–°è½¦å‹æ•°æ®

### å»ºè®®

1. **çŸ­æœŸ**: å®Œå–„ WebSocket é”™è¯¯å¤„ç†å’Œç”¨æˆ·ä½“éªŒ
2. **ä¸­æœŸ**: ä¼˜åŒ–æ€§èƒ½å’Œç¨³å®šæ€§ï¼Œå®Œå–„ç›‘æ§
3. **é•¿æœŸ**: è€ƒè™‘å¤šæ•°æ®æºé›†æˆï¼Œé™ä½å•ç‚¹ä¾èµ–é£é™©

---

## ğŸ“ æ€»ç»“

Rehui Car Adviser åœ¨ 2025 å¹´ 10 æœˆ 10 æ—¥å®Œæˆäº† WebSocket å®æ—¶é€šä¿¡æ¶æ„å’Œå‰ç«¯æ¶æ„é‡æ„ï¼Œå®ç°äº†ä»ä¼ ç»Ÿ HTTP è¯·æ±‚-å“åº”æ¨¡å¼å‘å®æ—¶åŒå‘é€šä¿¡çš„è½¬å˜ã€‚æ–°æ¶æ„æä¾›äº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒå’Œæ›´ä¸°å¯Œçš„äº¤äº’åŠŸèƒ½ã€‚

### é‡æ„æˆæœ

1. **WebSocket å®æ—¶é€šä¿¡**: å®ç°äº†æµå¼å¯¹è¯å’Œå®æ—¶æœç´¢
2. **å‰ç«¯æ¶æ„é‡æ„**: ç»„ä»¶åŒ–ã€æ¨¡å—åŒ–ã€ç±»å‹å®‰å…¨çš„è®¾è®¡
3. **å®æ—¶ä¸šåŠ¡åé¦ˆ**: ç”¨æˆ·å¯ä»¥å®æ—¶çœ‹åˆ°ç³»ç»Ÿå¤„ç†çŠ¶æ€
4. **åŒå‘é€šä¿¡**: æ”¯æŒå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„å®æ—¶æ•°æ®äº¤æ¢
5. **æµå¼ä½“éªŒ**: AI å›å¤å’Œæœç´¢ç»“æœå®æ—¶æµå¼æ˜¾ç¤º

### ä¸‹ä¸€æ­¥è®¡åˆ’

1. **åŠŸèƒ½éªŒè¯**: å…¨é¢æµ‹è¯• WebSocket å®æ—¶é€šä¿¡åŠŸèƒ½
2. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–å®æ—¶é€šä¿¡çš„æ€§èƒ½å’Œç¨³å®šæ€§
3. **ç”¨æˆ·ä½“éªŒ**: å®Œå–„å®æ—¶äº¤äº’çš„ç”¨æˆ·ä½“éªŒ
4. **ç›‘æ§éƒ¨ç½²**: æ·»åŠ  WebSocket ç›‘æ§å’Œå‘Šè­¦æœºåˆ¶

é¡¹ç›®æ­£å¤„äºä»ä¼ ç»Ÿ Web åº”ç”¨å‘å®æ—¶äº¤äº’åº”ç”¨æ¼”è¿›çš„å…³é”®é˜¶æ®µï¼ŒWebSocket å®æ—¶é€šä¿¡æ¶æ„çš„æˆåŠŸå°†ä¸ºåç»­çš„åŠŸèƒ½æ‰©å±•å’Œç”¨æˆ·ä½“éªŒæå‡å¥ å®šåšå®åŸºç¡€ã€‚

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025 å¹´ 10 æœˆ 10 æ—¥  
**ä¸‹æ¬¡æ›´æ–°å»ºè®®**: å®Œæˆ WebSocket åŠŸèƒ½éªŒè¯å’Œæ€§èƒ½æµ‹è¯•åé‡æ–°è¯„ä¼°
